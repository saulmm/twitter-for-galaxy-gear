<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
		<title>Wearable UI</title>
		<link rel="stylesheet"  href="./lib/tau/wearable/theme/default/tau.css">
		<link rel="stylesheet"  href="./css/main_screen.css">
	</head>
	<body>
		<div id="main_screen" class="ui-page">
						
			<div id="spinner_container">
				<div id="loading_screen" class="card">
					<div class="ui-processing-text loading_text">
						Loading tweets
					</div>
	
					<div class="ui-processing loading_spinner">
					</div>
				</div>
			</div>
			
			<div id="error_container" class="card">
				<div id="error_message" class="error_text"></div>
			</div>
		</div>
		
		<script type="text/javascript" src="./lib/tau/wearable/js/tau.js"></script>
		<script type="text/javascript" src="./js/main_screen.js"></script>
		<script type="text/javascript" src="./js/device_handler.js"></script>
		
		<script type="text/javascript">
		
			setConnectedCallback(function () { 
				fetch ("/twitter/get_tweets");
			});
			
			setErrorCallback (function (err) {
				
				if (err === "DEVICE_NOT_CONNECTED") {
					showErrorMessage ("Please pair your Galaxy to the Gear");
				
				} else if (err == "NOT_LOGGED") {
					showErrorMessage ("Go to 'Twitter on Gear' on your Galaxy, login with twitter and restart the app")
				
				} else {
					showError ("Unnable to connect with twitter");
				}
				
				console.log("exception [" + err.name + "] msg[" + err.message + "]");	
			});	
			
			function showErrorMessage (message) {
					spinnerContainer = document.getElementById ("spinner_container");
					spinnerContainer.style.display = "none";
				
					errorContainer = document.getElementById("error_container");
					errorContainer.style.display = "block";
					
					errorText = document.getElementById ("error_message");
					errorText.innerHTML = message;
			}
		
			function start() {
				connect();				
			}
			
			start ();

		</script>
	</body>
</html>